#### 可得眼镜网

###### 模块划分

|              | 首页         | 毒物       | 购物车             | 我的               | 分类          | 详情页   | 登录注册 |
| ------------ | ------------ | ---------- | ------------------ | ------------------ | ------------- | -------- | -------- |
| 路由         | /app/home    | /app/duwu  | /car               | /my                | /app/classify | /details | /login   |
| 设置路由守卫 |              |            | 未登录跳转到登录页 | 未登录跳转到登录页 |               |          |          |
| 公共模块     | 搜索         | 头部       | 头部               |                    | 搜索          | 头部     |          |
| 公共模块     | 轮播图       |            |                    |                    |               | 轮播图   |          |
| 页面模块     | 品牌区       | 导航轮播   | 商品列表           | 个人基本信息       | 一级导航      | tab切换  |          |
| 页面模块     | 热销单品     | 精品展示区 | 猜你喜欢           | 订单服务           | 二级导航      | 简介区   |          |
| 页面模块     | 透明隐形眼镜 | 其他展示区 |                    | 我的服务           |               | 详情区   |          |
| 页面模块     | 海外购       |            |                    | 更多服务           |               | 评论区   |          |
| 页面模块     | 返回顶部     |            |                    | 个人信息编辑区     |               | 底部     |          |
| 公共模块     | 底部         | 底部       | 底部               |                    | 底部          |          |          |





###### 数据库设置

|        | users    | goods               | comment               | car        | indent      |
| ------ | -------- | ------------------- | --------------------- | ---------- | ----------- |
|        | 用户账号 | 商品信息            | 评论                  | 购物车     | 订单        |
| 字段名 | user     | goodId：商品ID      | comment：评论内容     | user       | user        |
| 字段名 | password | goodName：名称      | commentTime：评论时间 | id：商品ID | id：商品ID  |
| 字段名 |          | goodTitle：标题     | commentUers：评论人   | num：数量  | num：数量   |
| 字段名 |          | originalPrice：原价 | commentStart：评论分  |            | price：价格 |
| 字段名 |          | goodNum：数量       | goodId：商品id        |            |             |
|        |          | imgUrl：图片路径    | goodName：名称        |            |             |
|        |          | currentPrice：现价  |                       |            |             |
|        |          | goodIntro：简介     |                       |            |             |
|        |          | goodType：类型      |                       |            |             |
|        |          |                     |                       |            |             |
|        |          |                     |                       |            |             |



###### 修改浏览器滚动条默认样式

~~~~
//全局使用
::-webkit-scrollbar {
      width: 0px;
      background: none;
    }
~~~~





###### 如何解决跳转页面后底部字体高亮效果的不跟随效果？

解决办法：先在created函数中获取当前路由并赋值data中的变量，再使用监听函数监听路由的变化，把改变的路由赋值给data中的变量；

~~~~
watch: {
        //监听路由变化/实现底部导航高亮状态的跟随
        $route(to, from) {
          // to,from 分别表示从哪跳转到哪，都是一个对象 // to.path(表示的是要跳转到的路由的地址);
          this.selInit = to.path;//赋值
        }
      }
~~~~





###### 监听store仓库数据的变化

~~~~
方法一
computed: {
  isFollow () {
    return this.$store.state.demo.id;　　//需要监听的数据
  }
},
watch: {
  isFollow (newVal, oldVal) {
    //do something
  }
}
方法二
watch: {
    '$store.getters.getGoodType.goodsList: function () {
      //你需要执行的代码
    }
},
~~~~



###### 瀑布流

具体看组件内容，原理如下

~~~
<!-- PC端瀑布流布局 -->
  <!-- 简单瀑布流实现，还需改为ref属性，优化节点获取的操作，优化代码 -->
  <!--
  瀑布流布局
      1）计算当前大容器能容纳多少列
          列数 = parseInt(大容器宽度/容器宽度)
      2）计算水平间隔
          间隔 = 大容器宽度%容器宽度/(列数+1)
      3）创建一个数组pos
          用来保存第一行每列图片左上角坐标(left,top)
      4）遍历所有items，定位
          遍历数组pos，查找最小top值，然后更新当前top值
              top += gap + 容器高度(等待图片加载完毕后才能获取到)
          *异步加载，for循环遍历很快，onload需要等待，i已经加到了最大值。
      * 滚动条宽度为17px，记得减掉
  -->
~~~



###### 跨域问题

设置了“res.append('Access-Control-Allow-Origin', '*'); ”后，get请求没问题，但是post请求还是会跨域，这是为什么？

post请求需要特殊处理 https://github.com/Wscats/vue-tutorial/issues/16